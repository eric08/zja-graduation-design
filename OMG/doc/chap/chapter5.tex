\chapter{标注工具的具体实现}
根据上一章的结果，我们得到了整体软件的初步模型。这一章将要在得到的模型的基础上，具体地说明软件实现的细节，并且
有重点地介绍一下在编码的过程中使用到的技术。
\section{软件实现平台}
如前所述，我们的工具实现在Android移动平台上。以下是软件实现中的一些具体参数：
\begin{center}
\begin{tabular}{|c|c|}
  \hline
  % after \\: \hline or \cline{col1-col2} \cline{col3-col4} ...
  操作系统 & Google Android\textregistered \\
  系统版本 & 兼容2.1至2.3版本的Android系统 \\
  硬件平台 & 基于ARM体系结构的移动平台 \\
  实现语言 & JAVA\&C \\
  \hline
\end{tabular}
\end{center}
接下来简要地介绍以下我们选择上表作为软件的总体开发环境的理由。

关于平台的选择，Google公司的Android是当前最为普遍的移动平台上的操作系统。另外由于Android可以在各种移动设备诸如手机
和平板电脑上稳定的运行，我们在今后选择硬件平台的自由度就会比较大。换句话来说，如果我们选择了一种操作系统，例如Apple
公司的IOS系统，那么很有可能的情况就是最适合我们的硬件设备并不能运行这个操作系统。也就是说，选择Android操作系统能够
最大地保障我们在限制成本的情况下选择最合适于我们需求的硬件设备。

关于操作系统的版本，虽然我们只是声明能够兼容2.1至2.3版本的Android系统，但是实际上在最新的Android 4.0.3系统上依旧可以稳定运行。我们选择2.3版本作为我们开发的主要版本是由于市场上最为普遍的Android系列的操作系统就是
Android2.3操作系统。

另外选择过高版本的操作系统会在硬件条件不变的情况下拖慢整体工具的速度，亦或是为了保证在高版本操作系统上依旧能够获得
流畅的操作就必须购买更高配置的设备。但是低版本的操作系统则缺失了很多特性，并且不够稳定。所以综合考虑决定以2.3版本作为
主要支持的版本。
\section{软件实现中用到的优化技术}
在我们的软件的立体图像生成的模块计算量较大，而Android提供给我们的API为java语言。虽然java跨平台的特性使得在我们对于
不同硬件设备的兼容性不需要考虑到很多。但是另一个方面，随着JVM(Java虚拟机)给我们带来的便利性的同时，我们也要为
这种便利付出我们的代价，那就是效率问题。

虽然在J2SE1.4.2发布后Java的速度执行速度有很大的提升，但是在数学计算，内存读取等方面和C/C++的差距还是很明显。
于此同时我们的大量开销都花费在图像操作上，这却恰好是设计大量数学计算和内存读取的操作。所以我们需要将基于C语言实现
的算法移植到Android上。以下我将会重点两个在移植中大量使用的技术。
\subsection{JNI技术}
JNI是Java Native Interface的缩写，中文为JAVA本地调用。顾名思义，它是用来调用本地的函数或者方法的接口。

何谓本地接口，我们知道Java语言都是运行在JVM虚拟机上的，而JVM虚拟机则是运行在本地接口上的。