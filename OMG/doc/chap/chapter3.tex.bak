\chapter{标注模型的设计}
    \section{基于触摸屏的标注模型}
    在作为标注媒介方面，和传统的PC操作触摸屏具有以下几个优势:


      首先是触摸屏的操作直观，由于图像的深度信息标注类似于在图上作画，而基于传统PC使用鼠标点击特定图片已达到标注信息的目的是非常不直观而且
      效率低下的。

      与此同时，触摸屏的标注就要显得直接的多，可以将屏幕作为画布，在屏幕上直接点击对应点达到标注的效果。
      虽然面临着类似于手指标注不够准确的问题，但是这个问题可以用触控笔和屏幕的结合来解决。

      其次多点触控(但是据悉苹果公司已经获得了该项技术的专利，将其应用到产品上可能带来潜在的版权风险)以及手势识别
      相较点击按键更为便利。

      在我们之前的软件实际操作中发现过多的按键对于工作人员的效率影响很大，从而降低工具的标注效率。另一方面如果
      更多地使用手势来代替按键，就能够将更多的屏幕面积用于显示标注的图像，这样就能够减少由于不必要的图像缩放造
      成的标注之外的操作。而且使用手势来代替按钮从软件的使用上就更为简易，对于培训新的工作人员上手操作是十分有利的。

      第三，触摸屏能够避免长时间操控鼠标带来的伤害

      事实上在设计标注工具的时候我们需要考虑到该工具的易用性，由于在电影工业中实际的图像立体信息的标注需要工作人员
      长时间的专注于重复的信息标注工作。长时间操作鼠标容易给人带来疲劳的感觉。另一方面长期长时间在工作时使用鼠标容易
      给工作人员的身体健康尤其是指关节带来不利的影响，甚至导致患上相关疾病。

      然而触摸屏由于操作更贴进人体正常操作，所以对于减缓工作疲劳和减轻相关疾病的概率都是有利的。这从另一个方面也提高了
      标注工具的工作效率。

      和\ref{sec:2.2}节中所述的一样，我们将整个标注模型分为了前景标注和背景标注。整体标注流程如图\ref{fig:labelstruct}：
      \begin{figure}[htbp]
      \centering
      \includegraphics[width=\linewidth]{img/chapter3/labelstruct.pdf}
      \caption{单帧标注模型的设计}\label{fig:labelstruct}
      \end{figure}
      可以看出，我们在单帧的前景标注中分别生成了两幅depth map，最后将其合成为最终的depth map从而达到标注的目的。事实上在这里大量的背景标注工作被交由计算机自动生成。因为背景标注的效果虽然不如手动的标注
      精确，但是经过我们的实践标明只要保证背景的深度估计在时间序上是连续的就不会给观影者带来不适。这主要是由于观众的注意力
      主要集中于深度变化较大的前景物体上。

      由于背景的深度自动估计已经有了成熟稳定的算法，所以本项目的主要目的是在解决前景的标注问题。

    \section{前景标注方法}
    前景标注有很多方法，其中最传统的是手工标注出每一个像素点的深度值。这个方法的优点是易于实现，而且如果能保证人工标注
    完全准确的话，理论上可以得到ground truth。但是这个方法的缺点显而易见，那就是工作量非常大，工作效率非常低。而且如何保证帧之间的标注一致性也是一个问题。

    除去逐点标注的方法，由于前景物体大多是独立于背景的一个物体，所以可以将前景图像切分出来，并且给前景图像单独赋予一个深度值
    的办法来将一整块的代表前景物体的像素都赋予一个相同的深度值用来代表物体的深度。这种图像切割的方法大概有两种成熟的方法可以选择。

    第一种较为实用的方法是使用Graph Cuts\cite{GraphCutsICCV2001}的方法。其使用方法如图\ref{fig:graphcut}所示
    ，需要先设定一个矩形框，指明前景的大致位置。并且在矩形框中人工地标注上一些属于前景和背景的位置来引导图形的分割。实际上不需要
    将所有前景和背景都标注出来，只需要使标注能够覆盖大致的前景和背景的范围即可
    \begin{figure}[htbp]
    \centering
    \includegraphics[width=\linewidth]{img/chapter3/graphcuts.pdf}
    \caption{Graph Cuts标注流程}\label{fig:graphcut}
    \end{figure}
    
    第二种方法是使用Intelligent Scissors\cite{Mortensen:1995:ISI:218380.218442}的方法来对图像进行分割。如图\ref{fig:scissors}所示，可以看到Intelligent Scissors类似著名图像处理软件Photoshop的磁性套索。实际上这不是一个整体的图像切分的算法，而仅仅是图像不规则边缘
    的切分算法。
    \begin{figure}[htbp]
    \centering
    \includegraphics[width=\linewidth]{img/chapter3/Scissors.pdf}
    \caption{Intelligent Scissors标注过程}\label{fig:scissors}
    \end{figure}
    
    为了使Intelligent Scissors能在我们的算法中切分出一个封闭区域，我们对于它的使用做如下的限制：在初始分割一个前景物体的时候可以从前景边缘
    的任意位置开始标注。而只要这个前景物体被确定了第一段边缘之后，剩下的所有分割操作就只能是在这个已有的边缘上以这条边缘
    划定的不规则曲线的端点为基础扩展。
    
    如图\ref{fig:scissors}中所显示的那样，要延伸在标注中的前景物体的边缘的方式就是从当前边缘曲线的两端开始扩展。这样就能够保证最后当用户
    将当前边缘曲线的两个端点连接起来的时候一定能够得到一个封闭的区域作为前景物体的标注区域。
    
    基于Graph Cuts的分割和基于Intelligent Scissors的分割都能够达到我们对于前景物体的抠像的目的。这里我们将两个方法的特点做出一个对比。 